# 📝 어셈블리 & CPU 동작 원리 정리 (Markdown)

## 메모리와 실행 과정
- 기억하고 실행하려면 **보조기억장치 → 주기억장치**로 이동해야 한다.
- MEMORY STORAGE(메인메모리)에 있는 명령과 데이터를 레지스터에 가져온다.
- `.exe` 파일은 보조기억장치에서 대기 → 주기억장치로 옮겨 실행된다.
- `save` 하면 메인메모리에 있던 것이 보조기억장치에 **파일 형태**로 저장된다.
- 명령어는 CPU 안의 레지스터로 옮겨지고, **ALU가 처리 → 레지스터 저장 → 메모리로 이동**.

---

## 1. CLOCK 펄스
- 예) 2.5GHz → 1초에 25억번의 0101 진동  
- 5.0GHz → 1초에 50억번의 진동(클럭펄스)
- **CU(Control Unit)** : 클럭 펄스를 제어
- **ALU** : add만 지원 (뺄셈=보수, 곱셈=덧셈 반복, 나눗셈=뺄셈 반복)
- **레지스터** : 명령어 / 주소 저장 용도별로 구분, 종류와 개수 숙지 필요

---

## 2. 명령어 실행 순서
1. 실행 파일은 보조기억장치에 저장됨 → 실행 시 메모리 로드
2. **Fetch**: 주기억장치 → CPU
3. 명령어 디코딩 & 실행 (MOV AX 1234h → B8 34 12로 변환)
4. IP 레지스터가 자동 증가 (명령어 길이만큼)
5. **디코더** : 명령어 길이 해석
6. 실행 후 결과는 상태 플래그에 저장됨

---

## 3. CPU Block Diagram
- 동적 데이터 : **HEAP**
- 전역/정적 : **STACK**
- 실행할 명령어 : **CODE 영역**
- **메모리 구조** : CODE → DATA → HEAP → STACK
- **Cache** : CPU와 메모리 속도 차이를 줄이기 위한 고속 메모리 (L1~L3)
- **FPU** : 부동소수점 연산 장치

---

## 4. Instruction Pointer
- = Program Counter = Location Counter  
- 다음 실행 명령어 주소 저장

---

## 5. Java 실행 구조
- **JVM** : OS 독립적으로 자바 명령어 실행
- CPU는 JVM 위에서 자바 명령을 수행

---

## 프로그램 실행 과정
1. OS가 `.exe` 파일 존재 여부 확인
2. 환경변수에서 경로 탐색
3. 메모리에 적재 → 실행
4. 실행 중 프로세스 관리 → 종료 시 메모리에서 해제

---

# ⚙️ 32bit x86 Processors
- **Protected Mode** : 프로세스 간 간섭 불가 (보호됨)
- **Virtual 8086 Mode** : DOS 호환 모드
- **Real Address Mode** : 모든 메모리 직접 접근 가능
- **System Management Mode** : 제조사 전용 모드

### 레지스터
- AX, BX, CX, DX, EBP, ESP, ESI, EDI, EIP, EFLAGS, CS, SS, DS, ES, FS, GS → 총 16개
- **EAX~EDX** : 특수 목적(Special Purpose)  
- **AX** : 16비트, AH/AL로 분리  
- **EAX** : 32비트  
- **RAX** : 64비트 (앞에 R 붙음)

### 주요 레지스터 기능
- **SF** : 콘텍스트 스위칭 담당
- **SS** : 스택 담당
- **DS** : 데이터 담당
- **ES/GS** : 추가 데이터 세그먼트
- **CS** : 코드 세그먼트
- **IP** : 다음 명령어 주소

### Flag Register
- 실행 결과 상태를 각 비트에 저장

---

## MMX / FPU / SIMD
- **MMX** : 멀티미디어 확장 명령어, 8개 레지스터
- **FPU Data Registers** : 부동소수점 연산용 8개 레지스터
- **SIL/BIL** : 64비트 환경에서는 R 접두어 사용

---

📌 **중요 요약**  
1. 모든 프로그램은 보조기억장치에 저장 → 실행 시 주기억장치로 이동  
2. CPU는 레지스터와 ALU를 통해 명령어 처리  
3. Cache/FPU/MMX 등을 통해 성능 보완  
4. 32비트 x86에서는 Protected Mode가 기본, 64비트 확장 구조는 R레지스터 사용  

